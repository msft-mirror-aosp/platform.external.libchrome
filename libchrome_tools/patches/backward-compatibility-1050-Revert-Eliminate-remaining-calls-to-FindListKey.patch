From f67eec0bbb7d33f97efd632ef07fe70cee009ca3 Mon Sep 17 00:00:00 2001
From: Ren-Pei Zeng <kamesan@chromium.org>
Date: Thu, 27 Apr 2023 07:33:02 +0000
Subject: [PATCH] Revert "Eliminate remaining calls to FindListKey()"

This reverts commit f8cb5d5e20744a1c47153c82ba393e272cee8c41.
---
 base/values.cc | 12 ++++++++++++
 base/values.h  |  3 +++
 2 files changed, 15 insertions(+)

diff --git a/base/values.cc b/base/values.cc
index e0e7f76b54..7167e375e8 100644
--- a/base/values.cc
+++ b/base/values.cc
@@ -1169,6 +1169,18 @@ std::string* Value::FindStringKey(StringPiece key) {
   return GetDict().FindString(key);
 }
 
+const Value* Value::FindListKey(StringPiece key) const {
+  const Value* result = GetDict().Find(key);
+  if (!result || result->type() != Type::LIST) {
+    return nullptr;
+  }
+  return result;
+}
+
+Value* Value::FindListKey(StringPiece key) {
+  return const_cast<Value*>(std::as_const(*this).FindListKey(key));
+}
+
 Value* Value::SetKey(StringPiece key, Value&& value) {
   return GetDict().Set(key, std::move(value));
 }
diff --git a/base/values.h b/base/values.h
index 4e2a6bdd66..05d6e35d58 100644
--- a/base/values.h
+++ b/base/values.h
@@ -769,6 +769,9 @@ class BASE_EXPORT GSL_OWNER Value {
   // DEPRECATED: prefer `Value::Dict::FindString()`.
   const std::string* FindStringKey(StringPiece key) const;
   std::string* FindStringKey(StringPiece key);
+  // DEPRECATED: prefer `Value::Dict::FindList()`.
+  const Value* FindListKey(StringPiece key) const;
+  Value* FindListKey(StringPiece key);
 
   // `SetKey` looks up `key` in the underlying dictionary and sets the mapped
   // value to `value`. If `key` could not be found, a new element is inserted.
-- 
2.40.1.495.gc816e09b53d-goog

