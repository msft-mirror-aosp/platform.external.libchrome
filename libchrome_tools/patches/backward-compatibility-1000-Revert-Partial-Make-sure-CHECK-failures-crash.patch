From 7382695b0b3280b315515eec5c204d6678d72eb9 Mon Sep 17 00:00:00 2001
From: Jae Hoon Kim <kimjae@chromium.org>
Date: Tue, 7 Mar 2023 00:50:50 +0000
Subject: [PATCH] Revert "Make CHECK failures fatal on all platforms"

This reverts commit afb98ae85b08f83909c3764afed9999c1b3ce1b0.

Change-Id: I51324c7357f6c6f5bf180e466aa95b3c391e0ea9
---
 base/check.cc | 11 -----------
 1 file changed, 11 deletions(-)

diff --git a/base/check.cc b/base/check.cc
index 5bdb0d7f7b..33b194988a 100644
--- a/base/check.cc
+++ b/base/check.cc
@@ -180,21 +180,10 @@ std::ostream& CheckError::stream() {
 }
 
 CheckError::~CheckError() {
-  // TODO(crbug.com/1409729): Consider splitting out CHECK from DCHECK so that
-  // the destructor can be marked [[noreturn]] and we don't need to check
-  // severity in the destructor.
-  const bool is_fatal = log_message_->severity() == LOGGING_FATAL;
   // Note: This function ends up in crash stack traces. If its full name
   // changes, the crash server's magic signature logic needs to be updated.
   // See cl/306632920.
   delete log_message_;
-
-  // Make sure we crash even if LOG(FATAL) has been overridden.
-  // TODO(crbug.com/1409729): Remove severity checking in the destructor when
-  // LOG(FATAL) is [[noreturn]] and can't be overridden.
-  if (is_fatal) {
-    base::ImmediateCrash();
-  }
 }
 
 NotReachedError NotReachedError::NotReached(const char* file, int line) {
-- 
2.40.0.rc0.216.gc4246ad0f0-goog

