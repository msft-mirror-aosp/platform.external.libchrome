From db113d7fe037027bb34e51953b96a90d1dffb95a Mon Sep 17 00:00:00 2001
From: hscham <hscham@chromium.org>
Date: Tue, 2 Nov 2021 10:05:59 +0900
Subject: [PATCH] Keep SimpleAlarmTimer available to shill and power_manager

Keep base::Timer changes only for SimpleAlarmTimer.
---
 base/timer/timer.h                        |  13 +-

diff --git a/base/timer/timer.h b/base/timer/timer.h
index 70344e9302..d50659543f 100644
--- a/base/timer/timer.h
+++ b/base/timer/timer.h
@@ -143,6 +143,21 @@ class BASE_EXPORT TimerBase {
   virtual void OnStop() = 0;
   virtual void RunUserTask() = 0;
 
+  // Returns the current tick count.
+  TimeTicks Now() const;
+
+  void set_desired_run_time(TimeTicks desired) {
+    DCHECK_CALLED_ON_VALID_SEQUENCE(sequence_checker_);
+    desired_run_time_ = desired;
+  }
+
+  void set_is_running(bool running) {
+    DCHECK_CALLED_ON_VALID_SEQUENCE(sequence_checker_);
+    is_running_ = running;
+  }
+
+  const Location& posted_from() const { return posted_from_; }
+
   // The task runner on which the task should be scheduled. If it is null, the
   // task runner for the current sequence will be used.
   scoped_refptr<SequencedTaskRunner> task_runner_;
@@ -167,10 +182,7 @@ class BASE_EXPORT TimerBase {
   // sequence is returned.
   scoped_refptr<SequencedTaskRunner> GetTaskRunner();
 
-  // Returns the current tick count.
-  TimeTicks Now() const;
-
-  // Disables the scheduled task and abandon it so that it no longer refers back
+  // Disable |scheduled_task_| and abandon it so that it no longer refers back
   // to this object.
   void AbandonScheduledTask();
 
