From 3980e834f3f4529cd11c049d0eedec933d0f41de Mon Sep 17 00:00:00 2001
From: Ryo Hashimoto <hashimoto@chromium.org>
Date: Wed, 15 Nov 2023 19:35:45 +0900
Subject: [PATCH] Revert "Merge base/strings/string_piece_forward.h into
 string_piece.h"

This reverts commit 0aecac68e63f39bc04bab6417f0638676ff07732.

Change-Id: Iae63384b06d5c8d965359ef9a30a31717c3fe226
---
 base/strings/string_piece.h         | 11 +----------
 base/strings/string_piece_forward.h | 25 +++++++++++++++++++++++++
 2 files changed, 26 insertions(+), 10 deletions(-)
 create mode 100644 base/strings/string_piece_forward.h

diff --git a/base/strings/string_piece.h b/base/strings/string_piece.h
index 13bccd9eaf..b5562decec 100644
--- a/base/strings/string_piece.h
+++ b/base/strings/string_piece.h
@@ -10,15 +10,6 @@
 #ifndef BASE_STRINGS_STRING_PIECE_H_
 #define BASE_STRINGS_STRING_PIECE_H_
 
-#include <string_view>
-
-namespace base {
-
-template <typename CharT, typename Traits = std::char_traits<CharT>>
-using BasicStringPiece = std::basic_string_view<CharT, Traits>;
-using StringPiece = std::string_view;
-using StringPiece16 = std::u16string_view;
-
-}  // namespace base
+#include "base/strings/string_piece_forward.h"
 
 #endif  // BASE_STRINGS_STRING_PIECE_H_
diff --git a/base/strings/string_piece_forward.h b/base/strings/string_piece_forward.h
new file mode 100644
index 0000000000..e471b4cb8b
--- /dev/null
+++ b/base/strings/string_piece_forward.h
@@ -0,0 +1,25 @@
+// Copyright 2017 The Chromium Authors
+// Use of this source code is governed by a BSD-style license that can be
+// found in the LICENSE file.
+//
+// This header is deprecated. `base::StringPiece` is now `std::string_view`.
+// Use it and <string_view> instead.
+//
+// TODO(crbug.com/691162): Remove uses of this header.
+
+#ifndef BASE_STRINGS_STRING_PIECE_FORWARD_H_
+#define BASE_STRINGS_STRING_PIECE_FORWARD_H_
+
+#include <string_view>
+
+namespace base {
+
+template <typename CharT, typename Traits = std::char_traits<CharT>>
+using BasicStringPiece = std::basic_string_view<CharT, Traits>;
+using StringPiece = std::string_view;
+using StringPiece16 = std::u16string_view;
+using WStringPiece = std::wstring_view;
+
+}  // namespace base
+
+#endif  // BASE_STRINGS_STRING_PIECE_FORWARD_H_
-- 
2.43.0.rc0.421.g78406f8d94-goog

